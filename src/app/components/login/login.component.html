<div class="login-component" >
  <div class="card">
    <div class="card-header">
      <ul class="nav nav-tabs card-header-tabs">
        <li class="nav-item">
          <span class="nav-link" [class.active]="activeTab === 'login'" (click)="setActiveTab('login')">Inicia sesión</span>
        </li>
        <li class="nav-item">
          <span class="nav-link" [class.active]="activeTab === 'register'" (click)="setActiveTab('register')">Crear una cuenta</span>
        </li>
      </ul>
    </div>
    
    <div class="card-body" *ngIf="activeTab === 'login' ">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div  class="input-group mb-3">
          <input type="text" class="form-control" id="username" placeholder="Ingresa tu Usuario" formControlName="username" [ngClass]="{ 'is-invalid': submitted && f.username.errors }">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-user"></span>
            </div>
          </div>
          <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
            <div *ngIf="f.username.errors.required">Usuario es requerido</div>
          </div>
        </div>
        <div  class="input-group mb-3">
          <input type="password" class="form-control" id="password" placeholder="Ingrese su contraseña" formControlName="password" [ngClass]="{ 'is-invalid': submitted && f.password.errors }">
          <div class="input-group-append">
            <div class="input-group-text">
              <span class="fas fa-lock"></span>
            </div>
          </div>
          <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
            <div *ngIf="f.password.errors.required">Contraseña es requerido</div>
          </div>
        </div>
        <div class="d-grid gap-2">
          <button [disabled]="loading" class="btn btn-primary">Inicia sesión</button>
        </div>
      </form>
      <div *ngIf="!loading" class="mt-3">
        <a href="#">¿Olvidaste tu contraseña?</a>
      </div>
    </div>


    <div class="card-body register-card-body"  *ngIf="activeTab === 'register' ">
      <form [formGroup]="registerFormUser" (ngSubmit)="registerUser()">
          <div class="input-group mb-3">
              <input type="text" formControlName="name" class="form-control" placeholder="Nombre" [ngClass]="{ 'is-invalid': submittedUser && u.name.errors }">
              <div class="input-group-append">
                  <div class="input-group-text">
                      <span class="fa fa-user"></span>
                  </div>
              </div>
              <div *ngIf="submittedUser && u.name.errors" class="invalid-feedback">
                  <div *ngIf="u.name.errors.required">Nombre es requerido</div>
              </div>
          </div>
          <div class="input-group mb-3">
              <input type="text" formControlName="last_name" class="form-control" placeholder="Apellido (opcional)" [ngClass]="{ 'is-invalid': submittedUser && u.last_name.errors }">
              <div class="input-group-append">
                  <div class="input-group-text">
                      <span class="fas fa-user"></span>
                  </div>
              </div>
              <div *ngIf="submittedUser && u.last_name.errors" class="invalid-feedback">
                  <div *ngIf="u.last_name.errors.required">Apellido es requerido</div>
              </div>
          </div>

        <div class="input-group mb-3">
          <input type="text" formControlName="phone_number" class="form-control" placeholder="Telefono" [ngClass]="{ 'is-invalid': submittedUser && u.phone_number.errors }">
          <div class="input-group-append">
              <div class="input-group-text">
                  <span class="fas fa-phone"></span>
              </div>
          </div>
          <div *ngIf="submittedUser && u.phone_number.errors" class="invalid-feedback">
              <div *ngIf="u.phone_number.errors.required">Telefono es requerido</div>
          </div>
        </div>

        <div class="input-group mb-3">
          <input type="text" formControlName="company_name" class="form-control" placeholder="Nombre Empresa" [ngClass]="{ 'is-invalid': submittedUser && u.company_name.errors }">
          <div class="input-group-append">
              <div class="input-group-text">
                  <span class="fas fa-building"></span>
              </div>
          </div>
          <div *ngIf="submittedUser && u.company_name.errors" class="invalid-feedback">
              <div *ngIf="u.company_name.errors.required">Nombre Empresa es requerido</div>
          </div>
        </div>

        <div class="input-group mb-3">
          <input type="text" formControlName="username" class="form-control" placeholder="Nombre de Usuario" [ngClass]="{ 'is-invalid': submittedUser && u.username.errors }">
          <div class="input-group-append">
              <div class="input-group-text">
                  <span class="fas fa-user"></span>
              </div>
          </div>
          <div *ngIf="submittedUser && u.username.errors" class="invalid-feedback">
              <div *ngIf="u.username.errors.required">Nombre Usuario es requerido</div>
          </div>
        </div>

        <div class="input-group mb-3">
          <input type="password" class="form-control" placeholder="Ingrese su contraseña" formControlName="password" [ngClass]="{ 'is-invalid': submittedUser && u.password.errors }">
          <div class="input-group-append">
              <div class="input-group-text">
                  <span class="fas fa-lock"></span>
              </div>
          </div>
          <div *ngIf="submittedUser && u.password.errors" class="invalid-feedback">
              <div *ngIf="u.password.errors.required">Contraseña es requerido</div>
          </div>
        </div>

        <div class="d-grid gap-2">
          <button [disabled]="loading" class="btn btn-primary">Inicia sesión</button>
        </div>
      </form>
  </div>



</div>
